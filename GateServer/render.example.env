# Render environment template for EOS-Service gate.
# Copy values into Render dashboard as individual environment variables.
# Do NOT commit real secrets.

# Required gate secrets
GATE_JWT_SIGNING_KEY=REPLACE_WITH_LONG_RANDOM_SECRET
GATE_ADMIN_TOKEN=REPLACE_WITH_LONG_RANDOM_SECRET

# Optional dev bypass key (only if you want dev-only allow)
GATE_DEV_KEY=REPLACE_WITH_PRIVATE_DEV_KEY

# Gate ticket behavior
GATE_TICKET_MINUTES=30
GATE_ISSUER=latticeveil-gate
GATE_AUDIENCE=latticeveil-client
GATE_VERIFICATION_MODE=hash_or_proof

# EOS values used by /eos/config/gate (served only to valid gate-ticket clients)
EOS_PRODUCT_ID=REPLACE_WITH_YOUR_EOS_PRODUCT_ID
EOS_SANDBOX_ID=REPLACE_WITH_YOUR_EOS_SANDBOX_ID
EOS_DEPLOYMENT_ID=REPLACE_WITH_YOUR_EOS_DEPLOYMENT_ID
EOS_CLIENT_ID=REPLACE_WITH_YOUR_EOS_CLIENT_ID
EOS_CLIENT_SECRET=REPLACE_WITH_YOUR_EOS_CLIENT_SECRET
EOS_PRODUCT_NAME=LatticeVeil
EOS_PRODUCT_VERSION=1.0.0
EOS_LOGIN_MODE=deviceid

# Pin clients to your EOS public IDs
GATE_EXPECTED_SANDBOX_ID=REPLACE_WITH_YOUR_EOS_SANDBOX_ID
GATE_EXPECTED_DEPLOYMENT_ID=REPLACE_WITH_YOUR_EOS_DEPLOYMENT_ID
# Public ID policy: if_present (default), required, off
# - if_present: enforce only when client sends IDs (best for hash-only distribution)
# - required: enforce IDs for every request (strict)
# - off: disable ID pinning checks
GATE_PUBLIC_ID_POLICY=if_present

# Allowlist source: env | github | hybrid
ALLOWLIST_SOURCE=env
ALLOWLIST_REFRESH_SECONDS=30

# Recommended: secret file path in Render
# ALLOWLIST_JSON_PATH=/etc/secrets/allowlist.json

# Optional inline/env allowlist values (if not using ALLOWLIST_JSON_PATH)
# ALLOWLIST_PROOF_TOKENS=proof-token-1,proof-token-2
# ALLOWLIST_ALLOWED_CLIENT_EXE_SHA256=sha256a,sha256b
# ALLOWLIST_ALLOWED_DEV_EXE_SHA256=sha256dev
# ALLOWLIST_ALLOWED_RELEASE_EXE_SHA256=sha256release
# ALLOWLIST_MIN_VERSION=0.0.0

# Identity registry (reserved usernames + code/username resolver)
# Use github for free durable storage on Render free instances.
# Create the target file in that private repo first (see GateServer/identity-registry.example.json).
# Friends + recovery-code transfer also use this same registry (no extra env keys required).
IDENTITY_REGISTRY_SOURCE=github
IDENTITY_REGISTRY_GITHUB_REPO=REPLACE_WITH_PRIVATE_OWNER/REPO
IDENTITY_REGISTRY_GITHUB_PATH=identity-registry.json
IDENTITY_REGISTRY_GITHUB_BRANCH=main
IDENTITY_REGISTRY_GITHUB_TOKEN=REPLACE_WITH_GITHUB_TOKEN_WITH_CONTENTS_RW
IDENTITY_REGISTRY_REFRESH_SECONDS=30
IDENTITY_USERNAME_MIN=3
IDENTITY_USERNAME_MAX=16
IDENTITY_USERNAME_REGEX=^[A-Za-z0-9_]+$

# Presence cache (ephemeral, in-memory)
PRESENCE_TTL_SECONDS=90
